## 简述缓存雪崩
缓存雪崩，即。一大批缓存，同时失效，此时对于这一批的数据请求就全打到数据库上，查询数据多一点，可能数据库就挂了。

缓存雪崩这个名词非常形象，雪崩这两个词完美的比喻了当前的情况。之前提到的缓存击穿，是单点情况，雪崩就是多点情况。

伴随缓存雪崩的面试题，那肯定少不了缓存雪崩的解决方法。

那缓存击穿的处理解决方法能不能用于解决缓存雪崩呢？那当然可以。

所以按老规矩，我们从MySQL的角度和Redis的角度来回答这个面试题：

### 从MySQL的角度出发
无论是对很多键的并发查询（缓存雪崩），还是一次性对同一个键的很多次并发查询（缓存击穿），MySQL的解决方法都是简单粗暴：强行减少请求量。

和击穿一样，加锁。线程读数据，先看看数据有没有上锁，上锁了，等着，没上锁，获取锁后，再给数据库请求。
数据库压力肯定瞬间下来了。
![](jichuan1.png)

这个解决方法带来的问题也很好回答：用户体验是不是就会卡顿。这是必然的，牺牲用户体验，保证数据库不死机，这就是这个方式的设计出发点。

但相对缓存击穿的情形，对于缓存雪崩采取这种策略，效果并不会这么给力。原因也很简单，此时很多客户端的访问请求，不单单是基于一个键，并发量的减少不会像缓存击穿这么明显。

### 从Redis的角度出发
先回顾击穿用的一条吧：
1. 设置热点数据不过期

第二条，也很好理解，就是设置随机过期时间，避免缓存在同一时间大批失效。换句话，就是让缓存失效时间均匀一点。
